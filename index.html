<!-- saved from url=(0057)data:text/html, <html contenteditable spellcheck="false"> -->
<html contenteditable="" spellcheck="false"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body><div><b><br class="Apple-interchange-newline">1. Simple loop example</b></div><div><pre style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: Hack, monospace; font-size: 9.8pt;"><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">main</span>() {<br>   <span style="color: rgb(199, 119, 62);">for </span>i := <span style="color: rgb(104, 151, 187);">1</span><span style="color: rgb(204, 120, 50);">; </span>i &lt;= <span style="color: rgb(104, 151, 187);">5</span><span style="color: rgb(204, 120, 50);">; </span>i++ {<br>      <span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(176, 157, 121);">Sleep</span>(<span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(152, 118, 170); font-style: italic;">Millisecond </span>* <span style="color: rgb(104, 151, 187);">500</span>)<br>      fmt.Printf(<span style="color: rgb(106, 135, 89);">"Work #%d done!</span><span style="color: rgb(204, 120, 50);">\n</span><span style="color: rgb(106, 135, 89);">"</span><span style="color: rgb(204, 120, 50);">, </span>i)<br>   }<br>}</pre></div><div><br></div><div><b>1.1 Introducing go keyword</b></div><div><pre style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: Hack, monospace; font-size: 9.8pt;"><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">main</span>() {<br>   <span style="color: rgb(199, 119, 62);">for </span>i := <span style="color: rgb(104, 151, 187);">1</span><span style="color: rgb(204, 120, 50);">; </span>i &lt;= <span style="color: rgb(104, 151, 187);">5</span><span style="color: rgb(204, 120, 50);">; </span>i++ {<br>      <span style="color: rgb(199, 119, 62);">go func</span>() {<br>         <span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(176, 157, 121);">Sleep</span>(<span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(152, 118, 170); font-style: italic;">Millisecond </span>* <span style="color: rgb(104, 151, 187);">500</span>)<br>         fmt.Printf(<span style="color: rgb(106, 135, 89);">"Work #%d done!</span><span style="color: rgb(204, 120, 50);">\n</span><span style="color: rgb(106, 135, 89);">"</span><span style="color: rgb(204, 120, 50);">, </span>i)<br>      }()<br>   }<br><br>   <span style="color: rgb(199, 119, 62);">for </span>{} <span style="color: rgb(120, 120, 120);">// We need to somehow stop it, check CPU 100% usage<br></span>}</pre></div><div><br></div><div><b>1.2 Use&nbsp;sync.WaitGroup</b></div><div><pre style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: Hack, monospace; font-size: 9.8pt;"><span style="color: rgb(199, 119, 62);">var </span>wg = <span style="color: rgb(175, 191, 126);">sync</span>.<span style="color: rgb(111, 175, 189);">WaitGroup</span>{}<br><br><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">main</span>() {<br>   <span style="color: rgb(199, 119, 62);">for </span>i := <span style="color: rgb(104, 151, 187);">1</span><span style="color: rgb(204, 120, 50);">; </span>i &lt;= <span style="color: rgb(104, 151, 187);">5</span><span style="color: rgb(204, 120, 50);">; </span>i++ {<br>      wg.<span style="color: rgb(176, 157, 121);">Add</span>(<span style="color: rgb(104, 151, 187);">1</span>)<br>      <span style="color: rgb(199, 119, 62);">go func</span>(i <span style="color: rgb(199, 119, 62);">int</span>) {<br>         <span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(176, 157, 121);">Sleep</span>(<span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(152, 118, 170); font-style: italic;">Millisecond </span>* <span style="color: rgb(104, 151, 187);">500</span>)<br>         fmt.Printf(<span style="color: rgb(106, 135, 89);">"Work #%d done!</span><span style="color: rgb(204, 120, 50);">\n</span><span style="color: rgb(106, 135, 89);">"</span><span style="color: rgb(204, 120, 50);">, </span>i)<br>         wg.<span style="color: rgb(176, 157, 121);">Done</span>()<br>      }(i)<br>   }<br><br>   wg.<span style="color: rgb(176, 157, 121);">Wait</span>()<br>}</pre></div><div><br></div><div><b>2. Race conditions problem</b></div><div><pre style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: Hack, monospace; font-size: 9.8pt;"><span style="color: rgb(199, 119, 62);">var </span>wg = <span style="color: rgb(175, 191, 126);">sync</span>.<span style="color: rgb(111, 175, 189);">WaitGroup</span>{}<br><span style="color: rgb(199, 119, 62);">var </span>counter = <span style="color: rgb(104, 151, 187);">0<br></span><span style="color: rgb(104, 151, 187);"><br></span><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">main</span>() {<br>   <span style="color: rgb(199, 119, 62);">for </span>i:= <span style="color: rgb(104, 151, 187);">0</span><span style="color: rgb(204, 120, 50);">; </span>i &lt; <span style="color: rgb(104, 151, 187);">10</span><span style="color: rgb(204, 120, 50);">; </span>i++ {<br>      wg.<span style="color: rgb(176, 157, 121);">Add</span>(<span style="color: rgb(104, 151, 187);">2</span>)<br>      <span style="color: rgb(199, 119, 62);">go </span><span style="color: rgb(176, 157, 121);">doWork</span>()<br>      <span style="color: rgb(199, 119, 62);">go </span><span style="color: rgb(176, 157, 121);">increment</span>()<br>   }<br>   wg.<span style="color: rgb(176, 157, 121);">Wait</span>()<br>}<br><br><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">doWork</span>() {<br>   <span style="color: rgb(175, 191, 126);">fmt</span>.<span style="color: rgb(176, 157, 121);">Printf</span>(<span style="color: rgb(106, 135, 89);">"Work #</span><span style="color: rgb(204, 120, 50);">%d</span><span style="color: rgb(106, 135, 89);"> done!</span><span style="color: rgb(204, 120, 50);">\n</span><span style="color: rgb(106, 135, 89);">"</span><span style="color: rgb(204, 120, 50);">, </span>counter)<br>   wg.<span style="color: rgb(176, 157, 121);">Done</span>()<br>}<br><br><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">increment</span>() {<br>   counter++<br>   wg.<span style="color: rgb(176, 157, 121);">Done</span>()<br>}</pre></div><div><br></div><div><b>2.1. Race conditions fix with Mutex</b></div><div><pre style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: Hack, monospace; font-size: 9.8pt;"><span style="color: rgb(199, 119, 62);">var </span>wg = <span style="color: rgb(175, 191, 126);">sync</span>.<span style="color: rgb(111, 175, 189);">WaitGroup</span>{}<br><span style="color: rgb(199, 119, 62);">var </span>counter = <span style="color: rgb(104, 151, 187);">0<br></span><span style="color: rgb(199, 119, 62);">var </span>m = <span style="color: rgb(175, 191, 126);">sync</span>.<span style="color: rgb(111, 175, 189);">RWMutex</span>{}<br><br><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">main</span>() {<br>   <span style="color: rgb(199, 119, 62);">for </span>i:= <span style="color: rgb(104, 151, 187);">0</span><span style="color: rgb(204, 120, 50);">; </span>i &lt; <span style="color: rgb(104, 151, 187);">10</span><span style="color: rgb(204, 120, 50);">; </span>i++ {<br>      wg.<span style="color: rgb(176, 157, 121);">Add</span>(<span style="color: rgb(104, 151, 187);">2</span>)<br>      <span style="color: rgb(120, 120, 120);">//m.RLock() // blocks for read<br></span><span style="color: rgb(120, 120, 120);">      </span><span style="color: rgb(199, 119, 62);">go </span><span style="color: rgb(176, 157, 121);">doWork</span>()<br>      <span style="color: rgb(120, 120, 120);">//m.Lock() // blocks for write<br></span><span style="color: rgb(120, 120, 120);">      </span><span style="color: rgb(199, 119, 62);">go </span><span style="color: rgb(176, 157, 121);">increment</span>()<br>   }<br>   wg.<span style="color: rgb(176, 157, 121);">Wait</span>()<br>}<br><br><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">doWork</span>() {<br>   m.<span style="color: rgb(176, 157, 121);">RLock</span>() <span style="color: rgb(120, 120, 120);">// blocks for read<br></span><span style="color: rgb(120, 120, 120);">   </span><span style="color: rgb(175, 191, 126);">fmt</span>.<span style="color: rgb(176, 157, 121);">Printf</span>(<span style="color: rgb(106, 135, 89);">"Work #</span><span style="color: rgb(204, 120, 50);">%d</span><span style="color: rgb(106, 135, 89);"> done!</span><span style="color: rgb(204, 120, 50);">\n</span><span style="color: rgb(106, 135, 89);">"</span><span style="color: rgb(204, 120, 50);">, </span>counter)<br>   m.<span style="color: rgb(176, 157, 121);">RUnlock</span>()<br>   wg.<span style="color: rgb(176, 157, 121);">Done</span>()<br>}<br><br><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">increment</span>() {<br>   m.<span style="color: rgb(176, 157, 121);">Lock</span>() <span style="color: rgb(120, 120, 120);">// blocks for write<br></span><span style="color: rgb(120, 120, 120);">   </span>counter++<br>   m.<span style="color: rgb(176, 157, 121);">Unlock</span>()<br>   wg.<span style="color: rgb(176, 157, 121);">Done</span>()<br>}</pre></div><div><br></div><div><b>3. Introducing channels</b></div><div><pre style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: Hack, monospace; font-size: 9.8pt;">unbuffered := make(<span style="color: rgb(199, 119, 62);">chan </span>int)<br>buffered := make(<span style="color: rgb(199, 119, 62);">chan </span>int<span style="color: rgb(204, 120, 50);">, </span><span style="color: rgb(104, 151, 187);">1</span>)<br><br><span style="color: rgb(120, 120, 120);">// Blocks<br></span>a := &lt;- unbuffered<br><br><span style="color: rgb(120, 120, 120);">//Blocks<br></span>unbuffered &lt;- <span style="color: rgb(104, 151, 187);">1<br></span><span style="color: rgb(104, 151, 187);"><br></span><span style="color: rgb(120, 120, 120);">//Synchronises<br></span><span style="color: rgb(199, 119, 62);">go func</span>() { &lt;- unbuffered }()<br>unbuffered &lt;- <span style="color: rgb(104, 151, 187);">1<br></span><span style="color: rgb(104, 151, 187);"><br></span><span style="color: rgb(120, 120, 120);">//Blocks<br></span>a := &lt;- buffered<br>_ = a<br><br><span style="color: rgb(120, 120, 120);">//Fine, there is a buffer who can take it<br></span>buffered &lt;- <span style="color: rgb(104, 151, 187);">1<br></span><span style="color: rgb(104, 151, 187);"><br></span><span style="color: rgb(120, 120, 120);">//Blocked (buffer is full)<br></span>buffered &lt;- <span style="color: rgb(104, 151, 187);">1<br></span>buffered &lt;- <span style="color: rgb(104, 151, 187);">1</span></pre></div><div><div>Blocking can lead to&nbsp;<b>deadlocks</b></div><div>Blocking can&nbsp;<b>prevent scaling</b></div></div><div><br></div><div><br></div><div><b>3.1. Example use of channels to prevent race conditions</b></div><div><pre style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: Hack, monospace; font-size: 9.8pt;"><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">main </span>() {<br>   c := <span style="color: rgb(255, 198, 109);">make</span>(<span style="color: rgb(199, 119, 62);">chan string</span>)<br><br>   <span style="color: rgb(199, 119, 62);">go </span><span style="color: rgb(176, 157, 121);">count</span>(<span style="color: rgb(106, 135, 89);">"I understand this"</span><span style="color: rgb(204, 120, 50);">, </span>c)<br><br>   <span style="color: rgb(120, 120, 120);">// You have to read the channel multiple times<br></span><span style="color: rgb(120, 120, 120);">   </span><span style="color: rgb(199, 119, 62);">for </span>{<br>      msg<span style="color: rgb(204, 120, 50);">, </span>open := &lt;- c<br>      <span style="color: rgb(120, 120, 120);">// You can check if it's open<br></span><span style="color: rgb(120, 120, 120);">      </span><span style="color: rgb(199, 119, 62);">if </span>!open {<br>         <span style="color: rgb(199, 119, 62);">break<br></span><span style="color: rgb(199, 119, 62);">      </span>}<br>      <span style="color: rgb(175, 191, 126);">fmt</span>.<span style="color: rgb(176, 157, 121);">Println</span>(msg)<br>      <span style="color: rgb(120, 120, 120);">// Don't close the channel here!<br></span><span style="color: rgb(120, 120, 120);">   </span>}<br>}<br><br><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">count</span>(message <span style="color: rgb(199, 119, 62);">string</span><span style="color: rgb(204, 120, 50);">, </span>c <span style="color: rgb(199, 119, 62);">chan string</span>) {<br>   <span style="color: rgb(199, 119, 62);">for </span>i := <span style="color: rgb(104, 151, 187);">1</span><span style="color: rgb(204, 120, 50);">; </span>i &lt;= <span style="color: rgb(104, 151, 187);">5</span><span style="color: rgb(204, 120, 50);">; </span>i++ {<br>      c &lt;- message<br>      <span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(176, 157, 121);">Sleep</span>(<span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(152, 118, 170); font-style: italic;">Millisecond </span>* <span style="color: rgb(104, 151, 187);">250</span>)<br>   }<br><br>   <span style="color: rgb(120, 120, 120);">// Close the channel if you're the sender<br></span><span style="color: rgb(120, 120, 120);">   </span><span style="color: rgb(199, 119, 62);">close</span>(c) <span style="color: rgb(120, 120, 120);">// You just mark them to no longer accepts new values<br></span><span style="color: rgb(120, 120, 120);">   // Channels aren't resources like files or sockets<br></span>}</pre></div><div><br></div><div><br></div><div><b>3.2. Example use of channels to organize&nbsp;work</b></div><div><br></div><div><pre style="background-color: rgb(43, 43, 43); color: rgb(169, 183, 198); font-family: Hack, monospace; font-size: 9.8pt;"><span style="color: rgb(120, 120, 120);">// Fake a long and difficult work.<br></span><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">DoWork</span>() {<br>   <span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(176, 157, 121);">Sleep</span>(<span style="color: rgb(104, 151, 187);">500 </span>* <span style="color: rgb(175, 191, 126);">time</span>.<span style="color: rgb(152, 118, 170); font-style: italic;">Millisecond</span>)<br>}<br><br><span style="color: rgb(199, 119, 62);">var </span>maxNbConcurrentGoroutines = <span style="color: rgb(104, 151, 187);">5<br></span><span style="color: rgb(199, 119, 62);">var </span>nbJobs = <span style="color: rgb(104, 151, 187);">100<br></span><span style="color: rgb(104, 151, 187);"><br></span><span style="color: rgb(199, 119, 62);">func </span><span style="color: rgb(230, 177, 99);">main</span>() {<br>   <span style="color: rgb(120, 120, 120);">// Dummy channel to coordinate the number of concurrent goroutines.<br></span><span style="color: rgb(120, 120, 120);">   // This channel should be buffered otherwise we will be immediately blocked<br></span><span style="color: rgb(120, 120, 120);">   // when trying to fill it.<br></span><span style="color: rgb(120, 120, 120);">   </span>concurrentGoroutines := <span style="color: rgb(255, 198, 109);">make</span>(<span style="color: rgb(199, 119, 62);">chan struct</span>{}<span style="color: rgb(204, 120, 50);">, </span>maxNbConcurrentGoroutines)<br><br>   <span style="color: rgb(120, 120, 120);">// Fill the dummy channel with maxNbConcurrentGoroutines empty struct.<br></span><span style="color: rgb(120, 120, 120);">   </span><span style="color: rgb(199, 119, 62);">for </span>i := <span style="color: rgb(104, 151, 187);">0</span><span style="color: rgb(204, 120, 50);">; </span>i &lt; maxNbConcurrentGoroutines<span style="color: rgb(204, 120, 50);">; </span>i++ {<br>      concurrentGoroutines &lt;- <span style="color: rgb(199, 119, 62);">struct</span>{}{}<br>   }<br><br>   <span style="color: rgb(120, 120, 120);">// The done channel indicates when a single goroutine has<br></span><span style="color: rgb(120, 120, 120);">   // finished its job.<br></span><span style="color: rgb(120, 120, 120);">   </span>done := <span style="color: rgb(255, 198, 109);">make</span>(<span style="color: rgb(199, 119, 62);">chan bool</span>)<br><br>   <span style="color: rgb(120, 120, 120);">// The waitForAllJobs channel allows the main program<br></span><span style="color: rgb(120, 120, 120);">   // to wait until we have indeed done all the jobs.<br></span><span style="color: rgb(120, 120, 120);">   </span>waitForAllJobs := <span style="color: rgb(255, 198, 109);">make</span>(<span style="color: rgb(199, 119, 62);">chan bool</span>)<br><br>   <span style="color: rgb(120, 120, 120);">// Collect all the jobs, and since the job is finished, we can<br></span><span style="color: rgb(120, 120, 120);">   // release another spot for a goroutine.<br></span><span style="color: rgb(120, 120, 120);">   </span><span style="color: rgb(199, 119, 62);">go func</span>() {<br>      <span style="color: rgb(199, 119, 62);">for </span>i := <span style="color: rgb(104, 151, 187);">0</span><span style="color: rgb(204, 120, 50);">; </span>i &lt; nbJobs<span style="color: rgb(204, 120, 50);">; </span>i++ {<br>         &lt;-done<br>         <span style="color: rgb(120, 120, 120);">// Say that another goroutine can now start.<br></span><span style="color: rgb(120, 120, 120);">         </span>concurrentGoroutines &lt;- <span style="color: rgb(199, 119, 62);">struct</span>{}{}<br>      }<br>      <span style="color: rgb(120, 120, 120);">// We have collected all the jobs, the program<br></span><span style="color: rgb(120, 120, 120);">      // can now terminate<br></span><span style="color: rgb(120, 120, 120);">      </span>waitForAllJobs &lt;- <span style="color: rgb(199, 119, 62);">true<br></span><span style="color: rgb(199, 119, 62);">   </span>}()<br><br>   <span style="color: rgb(120, 120, 120);">// Try to start nbJobs jobs<br></span><span style="color: rgb(120, 120, 120);">   </span><span style="color: rgb(199, 119, 62);">for </span>i := <span style="color: rgb(104, 151, 187);">1</span><span style="color: rgb(204, 120, 50);">; </span>i &lt;= nbJobs<span style="color: rgb(204, 120, 50);">; </span>i++ {<br>      <span style="color: rgb(175, 191, 126);">fmt</span>.<span style="color: rgb(176, 157, 121);">Printf</span>(<span style="color: rgb(106, 135, 89);">"ID: </span><span style="color: rgb(204, 120, 50);">%v</span><span style="color: rgb(106, 135, 89);">: waiting to launch!</span><span style="color: rgb(204, 120, 50);">\n</span><span style="color: rgb(106, 135, 89);">"</span><span style="color: rgb(204, 120, 50);">, </span>i)<br>      <span style="color: rgb(120, 120, 120);">// Try to receive from the concurrentGoroutines channel. When we have something,<br></span><span style="color: rgb(120, 120, 120);">      // it means we can start a new goroutine because another one finished.<br></span><span style="color: rgb(120, 120, 120);">      // Otherwise, it will block the execution until an execution<br></span><span style="color: rgb(120, 120, 120);">      // spot is available.<br></span><span style="color: rgb(120, 120, 120);">      </span>&lt;-concurrentGoroutines<br>      <span style="color: rgb(175, 191, 126);">fmt</span>.<span style="color: rgb(176, 157, 121);">Printf</span>(<span style="color: rgb(106, 135, 89);">"ID: </span><span style="color: rgb(204, 120, 50);">%v</span><span style="color: rgb(106, 135, 89);">: it's my turn!</span><span style="color: rgb(204, 120, 50);">\n</span><span style="color: rgb(106, 135, 89);">"</span><span style="color: rgb(204, 120, 50);">, </span>i)<br>      <span style="color: rgb(199, 119, 62);">go func</span>(id <span style="color: rgb(199, 119, 62);">int</span>) {<br>         <span style="color: rgb(176, 157, 121);">DoWork</span>()<br>         <span style="color: rgb(175, 191, 126);">fmt</span>.<span style="color: rgb(176, 157, 121);">Printf</span>(<span style="color: rgb(106, 135, 89);">"ID: </span><span style="color: rgb(204, 120, 50);">%v</span><span style="color: rgb(106, 135, 89);">: all done!</span><span style="color: rgb(204, 120, 50);">\n</span><span style="color: rgb(106, 135, 89);">"</span><span style="color: rgb(204, 120, 50);">, </span>id)<br>         done &lt;- <span style="color: rgb(199, 119, 62);">true<br></span><span style="color: rgb(199, 119, 62);">      </span>}(i)<br>   }<br><br>   <span style="color: rgb(120, 120, 120);">// Wait for all jobs to finish<br></span><span style="color: rgb(120, 120, 120);">   </span>&lt;-waitForAllJobs<br>}</pre></div><div><br></div><div><b>4. Introduction to select keyword</b></div><div><br></div><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:&#39;Hack&#39;,monospace;font-size:9.8pt;"><span style="color:#c7773e;">func </span><span style="color:#e6b163;">main</span>() {<br>   c1 := <span style="color:#ffc66d;">make</span>(<span style="color:#c7773e;">chan string</span>)<br>   c2 := <span style="color:#ffc66d;">make</span>(<span style="color:#c7773e;">chan string</span>)<br>   c3 := <span style="color:#ffc66d;">make</span>(<span style="color:#c7773e;">chan string</span>)<br><br>   <span style="color:#c7773e;">go func</span>() {<br>      <span style="color:#afbf7e;">time</span>.<span style="color:#b09d79;">Sleep</span>(<span style="color:#6897bb;">1 </span>* <span style="color:#afbf7e;">time</span>.<span style="color:#9876aa;font-style:italic;">Second</span>)<br>      c1 &lt;- <span style="color:#6a8759;">"one"<br></span><span style="color:#6a8759;">   </span>}()<br>   <span style="color:#c7773e;">go func</span>() {<br>      <span style="color:#afbf7e;">time</span>.<span style="color:#b09d79;">Sleep</span>(<span style="color:#6897bb;">2 </span>* <span style="color:#afbf7e;">time</span>.<span style="color:#9876aa;font-style:italic;">Second</span>)<br>      c2 &lt;- <span style="color:#6a8759;">"two"<br></span><span style="color:#6a8759;">   </span>}()<br>   <span style="color:#c7773e;">go func</span>() {<br>      <span style="color:#afbf7e;">time</span>.<span style="color:#b09d79;">Sleep</span>(<span style="color:#6897bb;">10 </span>* <span style="color:#afbf7e;">time</span>.<span style="color:#9876aa;font-style:italic;">Second</span>)<br>      c3 &lt;- <span style="color:#6a8759;">"three"<br></span><span style="color:#6a8759;">   </span>}()<br><br>   <span style="color:#c7773e;">for </span>i := <span style="color:#6897bb;">0</span><span style="color:#cc7832;">; </span>i &lt; <span style="color:#6897bb;">3</span><span style="color:#cc7832;">; </span>i++ {<br>      <span style="color:#c7773e;">select </span>{<br>      <span style="color:#c7773e;">case </span>msg1 := &lt;-c1:<br>         <span style="color:#afbf7e;">fmt</span>.<span style="color:#b09d79;">Println</span>(<span style="color:#6a8759;">"received"</span><span style="color:#cc7832;">, </span>msg1)<br>      <span style="color:#c7773e;">case </span>msg2 := &lt;-c2:<br>         <span style="color:#afbf7e;">fmt</span>.<span style="color:#b09d79;">Println</span>(<span style="color:#6a8759;">"received"</span><span style="color:#cc7832;">, </span>msg2)<br>      <span style="color:#c7773e;">case </span>msg3 := &lt;-c3:<br>         <span style="color:#afbf7e;">fmt</span>.<span style="color:#b09d79;">Println</span>(<span style="color:#6a8759;">"received"</span><span style="color:#cc7832;">, </span>msg3)<br>      <span style="color:#c7773e;">case </span>&lt;-<span style="color:#afbf7e;">time</span>.<span style="color:#b09d79;">After</span>(<span style="color:#afbf7e;">time</span>.<span style="color:#9876aa;font-style:italic;">Second </span>* <span style="color:#6897bb;">3</span>):<br>         <span style="color:#afbf7e;">fmt</span>.<span style="color:#b09d79;">Println</span>(<span style="color:#6a8759;">"Time out: No news in 3 seconds"</span>)<br>      }<br>   }<br>}</pre></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div></body></html>
